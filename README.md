# YouTube Downloader UI

Кросплатформний застосунок на Tkinter, який використовує `yt-dlp`, `ffmpeg` та `ffprobe` для завантаження і перекодування відео з YouTube. Інтерфейс забезпечує попередній перегляд метаданих, вибір відрізку та паралельні завантаження кількох роликів.

## Можливості
- **Черга множинних завантажень** – додавайте декілька URL та відстежуйте їхній статус у реальному часі.
- **Попередній перегляд назви, обкладинки та тривалості** – перегляньте інформацію перед стартом і оберіть потрібний відрізок.
- **Гнучка обробка відрізків** – задайте час початку й кінця у форматі `години:хвилини:секунди`, щоб зберегти лише потрібну частину відео.
- **Динамічний розрахунок бітрейту** – автоматично визначає оптимальний бітрейт H.264, завжди з повільним (slow) пресетом для кращої якості.
- **Гнучке керування результатами** – зберігайте кожне відео в окремій теці або переносіть готові файли до спільної теки `YT_DOWNLOADER_FILES`.
- **Автоматичне прибирання** – після завершення завантаження видаляє проміжні файли `source.*` та теку `temp`.

## Встановлення
### Базові залежності
- Python 3.10 або новіший (під час інсталяції на Windows не забудьте позначити **Add Python to PATH**).
- [`yt-dlp`](https://github.com/yt-dlp/yt-dlp) – відповідає за завантаження відео.
- [`ffmpeg`](https://ffmpeg.org/) – забезпечує інструменти `ffmpeg` та `ffprobe` для перекодування і аналізу медіа.
- Опційно: [`Pillow`](https://python-pillow.org/) – дозволяє відображати обкладинки у форматах JPEG/WebP.

### Детальна інструкція для Windows
1. **Встановіть [Python 3.10+](https://www.python.org/downloads/windows/).** Під час інсталяції поставте прапорець **Add Python to PATH** на першому екрані та завершіть установку зі стандартними параметрами. Якщо Python уже інстальовано, перевірте доступність команди:
   ```powershell
   python --version
   ```
2. **Додайте `yt-dlp`.** Ця утиліта відповідає за завантаження відео:
   ```powershell
   python -m pip install --upgrade yt-dlp
   ```
3. **Підготуйте FFmpeg (містить `ffmpeg` і `ffprobe`).**
   1. Завантажте останню **release full build** з [https://www.gyan.dev/ffmpeg/builds/](https://www.gyan.dev/ffmpeg/builds/).
   2. Розпакуйте архів (наприклад, `ffmpeg-*-full_build.7z`) до `C:\ffmpeg`.
   3. Додайте `C:\ffmpeg\bin` до системної змінної PATH: **Settings → System → About → Advanced system settings → Environment Variables… → Path → Edit → New**.
   4. Відкрийте нове вікно PowerShell і переконайтеся, що команди доступні:
      ```powershell
      ffmpeg -version
      ffprobe -version
      ```
4. **(Опційно) Встановіть додаткові бібліотеки.**
   - Для відображення обкладинок: `python -m pip install Pillow`
   - Для Windows-розширень: `python -m pip install pywin32`
5. **Отримайте файли застосунку.** Клонуйте або скопіюйте репозиторій у зручну теку, наприклад:
   ```powershell
   cd D:\YouTube\
   git clone https://github.com/tscherya123/yt-downloader
   ```
6. **Запустіть інтерфейс.** У каталозі проєкту виконайте:
   ```powershell
   cd D:\YouTube\yt-downloader
   start_ui.bat
   ```
   Альтернатива – запустити `python ui.py`. Під час першого старту оберіть теку для збереження файлів (типово – «Завантаження» вашого профілю).
7. **Усунення поширених проблем.**
   - Помилки **Command not found** свідчать про відсутність запису у PATH – перевірте кроки 1 і 3.
   - Після зміни змінних середовища перезапустіть PowerShell.
   - За потреби прав адміністратора запустіть PowerShell із підвищеними правами.

### macOS / Linux
1. Встановіть Python 3.10+ з офіційного сайту або через пакетний менеджер.
2. Додайте `yt-dlp` та `Pillow` за потреби: `python -m pip install --upgrade yt-dlp Pillow`.
3. Встановіть `ffmpeg` і `ffprobe` (наприклад, `brew install ffmpeg` чи `sudo apt install ffmpeg`).
4. Переконайтеся, що команди `python`, `yt-dlp`, `ffmpeg` і `ffprobe` доступні у вашому терміналі.

## Швидкий старт
1. Клонуйте або завантажте цей репозиторій.
2. Встановіть залежності відповідно до вашої платформи.
3. У кореневій теці проєкту запустіть інтерфейс подвійним кліком по `start_ui.bat` (Windows) або командою:
   ```bash
   python ui.py
   ```
4. Під час першого старту застосунок запропонує теку для збереження (типово – `Завантаження` вашого профілю). Обраний шлях зберігається у файлі `settings.json` поряд із програмою.

## Робота з інтерфейсом
1. **Вставте YouTube-URL** у поле введення та натисніть **«Знайти відео»** – програма завантажить назву, обкладинку й тривалість.
2. (За потреби) **Оберіть кореневу теку**, де зберігатимуться робочі каталоги або спільна тека `YT_DOWNLOADER_FILES`. Під час першого запуску застосунок запропонує використати теку «Завантаження» у вашому профілі.
3. За замовчуванням готові файли переносяться до спільної теки `YT_DOWNLOADER_FILES`. Позначте пункт **«В окрему папку»**, щоб залишати результати у власних робочих каталогах.
4. Скористайтеся полями **«Початок»** і **«Кінець»**, щоб вказати відрізок. За замовчуванням зберігається повне відео.
5. Натисніть **«Скачати»**, щоб додати завдання у чергу. Можна запускати декілька завантажень одночасно – потоки виконуються паралельно.
6. Відстежуйте процес у **списку статусів** та **журналі подій**. Після успіху скористайтеся кнопкою **«Відкрити папку»** – у Windows файл відкриється у провіднику з попередньо виділеним результатом.
7. Історія завантажень зберігається в межах сесії. За потреби можна вручну натиснути **«Очистити історію»** (файли залишаться на диску, але записи у списку буде видалено).

## Усунення несправностей
- Переконайтеся, що команди `python`, `yt-dlp`, `ffmpeg` та `ffprobe` доступні у PowerShell чи терміналі.
- Якщо обкладинка не відображається, встановіть Pillow: `python -m pip install Pillow`.
- Після змін у PATH обов’язково перезапустіть термінал або PowerShell.
- Перегляньте журнал подій, аби знайти повідомлення про помилки від зовнішніх утиліт.

## Ліцензія
Проєкт розповсюджується за ліцензією MIT. За наявності див. файл [LICENSE](LICENSE) або адаптуйте рішення під власні потреби.
